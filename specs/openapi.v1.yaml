openapi: 3.0.0
info:
  title: tru.ID APIs
  version: v0.1
  contact:
    name: tru.ID API Team
    email: feedback@tru.id
  description: |
    # Introduction

    The tru.ID API uses [OAuth2](#tag/oauth2) Access Tokens for authentication. Access Tokens are created using the [/token endpoint](#operation/oauth2-token) with a valid `client_id` and `client_secret`. `client_id` and `client_secret` credentials are obtained by [creating a Project](#operation/create-project).

    The [**tru.ID PhoneCheck Workflow** and API](#tag/phone_check) confirms the ownership of a mobile phone number by verifying the possession of an active SIM card with the same number. A mobile data session is created to a unique **PhoneCheck URL** for the purpose of this verification. **tru.ID** then resolves a **PhoneCheck Match** between the phone number that the mobile network operator identifies as the owner of the mobile data session and the phone number being verified.

    The [**tru.ID SIMCheck API**](#tag/sim_check) provides information on when a SIM card associated with a mobile phone number last changed

    The [**tru.ID SubscriberCheck Workflow** and API](#tag/subscriber_check) combines the functionality offerd by PhoneCheck and SIMCheck into a single API. It confirms the ownership of a mobile phone number and provides information on when the SIM card associated with the mobile phone number last changed..
servers:
  - url: "https://{data_residency}.api.tru.id"
    description: For accounts with data residency in the EU
    variables:
      data_residency:
        default: eu
        enum:
          - eu
tags:
  - name: oauth2
    x-displayName: OAuth2
    description: Relating to the OAuth2 Provider
  - name: phone_check
    x-displayName: PhoneCheck
    description: Relating to PhoneCheck
  - name: subscriber_check
    x-displayName: SubscriberCheck
    description: Relating to SubscriberCheck
  - name: sim_check
    x-displayName: SIMCheck
    description: Relating to SIMCheck
  - name: projects
    x-displayName: Projects
    description: A project is container for configuration on the platform. A project contains credentials used to authenticate API requests with a project `mode` and per-product configuration.
  - name: workspaces
    x-displayName: Workspaces
    description: Relating to a workspace.
  - name: usage
    x-displayName: Usage
    description: Relating to Usage.
  - name: projects_deprecated
    x-displayName: Projects
    description: A project is container for configuration on the platform. A project contains credentials used to authenticate API requests with a project `mode` and per-product configuration.
  - name: workspaces_deprecated
    x-displayName: Workspaces
    description: Relating to a workspace.
  - name: usage_deprecated
    x-displayName: Usage
    description: Relating to Usage.
  - name: hide
    description: Tags that should not be rendered
  - name: coverage
    x-displayName: Coverage
    description: Relating to Coverage.
  - name: payments
    x-displayName: Payments
    description: Relating to Payments.
  - name: members
    x-displayName: Members
    description: Relating to Members.

x-tagGroups:
  - name: OAuth2
    tags:
      - oauth2
  - name: Products
    tags:
      - phone_check
      - subscriber_check
      - sim_check
  - name: Coverage
    tags:
      - coverage
  - name: Console v0.2
    tags:
      - workspaces
      - credentials
      - payments
      - projects
      - members
      - usage
  - name: Deprecated
    tags:
      - projects_deprecated
      - workspaces_deprecated
      - usage_deprecated
paths:
  /oauth2/v1/auth:
    get:
      summary: Obtain an authorization grant (Restricted Usage)
      description: "Used within the OAuth2 flow. Used to request access to a resource from the resource owner. Only supported for tru.ID owned applications. See https://tools.ietf.org/html/rfc6749#section-3.1"
      operationId: oauth2-auth
      tags:
        - hide
      parameters:
        - name: response_type
          description: "Used as part of an Authorization Code Grant. Expected to have a value of `code`. See https://tools.ietf.org/html/rfc6749#section-4.1"
          in: query
          schema:
            type: string
            example: code
        - name: client_id
          description: The client identifier. Only issued for use with `/auth` to internal tru.ID applications.
          in: query
          schema:
            type: string
            example: 63f16604-2b4f-4e45-b32f-59290507fe93
        - name: state
          description: |
            An opaque value used by the client to maintain state between the request and callback. The authorization server includes this value when redirecting the user-agent back to the client.
            See: https://tools.ietf.org/html/rfc6749#section-4.1.1"
          in: query
          schema:
            type: string
        - $ref: "#/components/parameters/scope"
        - name: redirect_url
          description: "After completing the interaction with the resource owner, the authorization server directs the resource owner's user-agent back the location identified by `redirect_url`."
          in: query
          schema:
            type: string
            format: uri
      responses:
        "302":
          description: Redirects to the `redirect_url`.
          headers:
            Location:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Location
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
  /oauth2/v1/token:
    post:
      summary: Create an Access Token
      description: |
        Creates an Access Token. Access Tokens are credentails used to authenticate API interactions.
        With the tru.ID platform, the usage is to create an Access Token from a `client_id` and `client_secret`.

        To obtain a `client_id` and `client_secret` you must first [create a Project](#operation/create-project).
      operationId: oauth2-token
      security:
        - BasicAuth: []
      tags:
        - oauth2
      requestBody:
        description: |
          The request body should match the [Client Credentails Grant](https://tools.ietf.org/html/rfc6749#section-4.4) flow.
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              description: |
                Create an Access Token authenticated using a `client_id` and `client_secret` as part of a [Client Credentails Grant](https://tools.ietf.org/html/rfc6749#section-4.4).
                The resulting token is used to access any API endpoints.
              properties:
                grant_type:
                  description: |
                    The type of grant; in this case a [Client Credentails Grant](https://tools.ietf.org/html/rfc6749#section-4.4).
                    Value must be set to `client_credentials`.
                  type: string
                  enum:
                    - client_credentials
                  example: client_credentials
                scope:
                  $ref: "#/components/schemas/OAuth2Scope"
      responses:
        "200":
          description: The Access Token was successfully created.
          content:
            application/json:
              schema:
                type: object
                description: |
                  The response to a [Client Credentails Grant](https://tools.ietf.org/html/rfc6749#section-4.4).
                properties:
                  access_token:
                    description: The Access Token to be used when authenticating with API endpoints
                    type: string
                    example: 2YotnFZFEjr1zCsicMWpAA
                  token_type:
                    description: |
                      The type of token in `access_token`. The token type returned will always be `bearer`.
                      For more information see [The OAuth 2.0 Authorization Framework: Bearer Token Usage](https://tools.ietf.org/html/rfc6750)
                    type: string
                    enum:
                      - bearer
                    example: bearer
                  expires_in:
                    description: The time in seconds when the token will expire.
                    type: integer
                    example: 3600
                  scope:
                    $ref: "#/components/schemas/OAuth2Scope"
              examples:
                phone_check:
                  value:
                    access_token: 2YotnFZFEjr1zCsicMWpAA
                    token_type: bearer
                    expires_in: 3600
                    scope: phone_check coverage
  /oauth2/v1/revoke:
    post:
      summary: Revoke an token
      description: Revoke a token from the OAuth2 provider.
      operationId: oauth2-revoke
      security:
        - BasicAuth: []
      tags:
        - oauth2
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              description: |
                The response to a [Client Credentails Grant](https://tools.ietf.org/html/rfc6749#section-4.4).
              properties:
                token:
                  description: The token to be revoked
                  type: string
                  example: 2YotnFZFEjr1zCsicMWpAA
                token_type_hint:
                  description: A hint to help the OAuth2 provider identify the type of token
                  type: string
                  enum:
                    - access_token
                    - refresh_token
                  example: access_token
      responses:
        "200":
          description: Response whether the Access Token was valid or invalid.
  /oauth2/v1/sessions/logout:
    get:
      summary: Logout of the current user session (Restricted Usage)
      description: |
        **Used by internal tru.ID applications only**.
        Log the current user out of an authenticated session with the OAuth2 provider.
      operationId: oauth2-sessions-logout
      security:
        - BasicAuth: []
      tags:
        - hide
      parameters:
        - name: id_token_hint
          description: The OAuth2 id token received when the client logged in
          schema:
            type: string
            example: token
          in: query
        - name: state
          description: "state that is played back to the client, when successfully redirected to the `post_logout_redirect_uri`"
          schema:
            type: string
            example: token
          in: query
        - name: post_logout_redirect_uri
          description: Where the browser client will be redirected to after a successful logout
          schema:
            type: string
            example: "https://example.com/logged_out"
          in: query
      responses:
        "302":
          description: Redirects to the `post_logout_redirect_uri`
          headers:
            Location:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Location
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining

  /phone_check/v0.1/checks:
    post:
      summary: Create a PhoneCheck workflow
      description: |
        Starts the PhoneCheck workflow.
      operationId: create-phone-check
      security:
        - ProjectBearerAuth: []
      tags:
        - phone_check
      requestBody:
        description: JSON payload to create a PhoneCheck
        content:
          application/json:
            schema:
              $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCreatePayload
      callbacks:
        phoneCheckEndStatus:
          "{$request.body#/callback_url}":
            post:
              summary: PhoneCheck has reached an end status
              parameters:
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-security
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-callback
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/digest
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/date
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/host
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCallbackPayload
              responses:
                $ref: ./models/common/Responses.v1.yaml#/components/responses/WebHookExpectedResponse
      responses:
        "201":
          description: PhoneCheck created
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCreateResponse
                 
                    
        "400":
          description: Bad Request
          content:
            application/problem+json:
              schema:
                oneOf:
                  - $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/InvalidPhoneNumberFormat
                  - type: object
                    allOf:
                      - $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/ProblemDetailsBase
                      - type: object
                        description: The country for the supplied `phone_number` is not supported
    get:
      summary: Get a collection of PhoneChecks
      operationId: get-phone-checks
      description: Get a full list of PhoneChecks or filter by query parameter.
      security:
        - ProjectBearerAuth: []
      tags:
        - phone_check
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/search
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/sort
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCollection
  "/phone_check/v0.1/checks/{check_id}":
    parameters:
      - name: check_id
        description: The ID of the PhoneCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get PhoneCheck
      description: "Get a PhoneCheck identified by `check_id`. NB: if the user never visits the `check_url`, after 60 seconds the Check will be deleted and 404 returned."
      operationId: get-phone-check
      security:
        - ProjectBearerAuth: []
      tags:
        - phone_check
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckGetResponse
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/phone_check/v0.1/checks/{check_id}/redirect":
    parameters:
      - name: check_id
        description: The ID of the PhoneCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Perform the PhoneCheck
      description: Perform the PhoneCheck identified by `check_id`.
      operationId: get-phone-check-redirect
      tags:
        - phone_check
      responses:
        "302":
          description: Redirects to the `check_url`.
          headers:
            Location:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Location
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "400":
          description: Mobile Network Operator Not Supported
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/MobileNetworkOperatorNotSupported
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "412":
          description: Not a mobile IP
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotMobileIp
  "/phone_check/v0.1/checks/{check_id}/traces":
    parameters:
      - name: check_id
        description: The ID of the PhoneCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get a collection of PhoneCheck Traces
      description: Get Traces of the PhoneCheck identified by `check_id`
      operationId: get-phone-check-traces
      tags:
        - phone_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceCollection
              examples:
                basic:
                  value:
                    _embedded:
                      traces:
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/phone_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
                          trace_id: 6f2a0e25fc0caa25
                          logs:
                            - timestamp: "2021-02-05T13:58:48.751Z"
                              message: "Check create: phone number is reachable"
                            - timestamp: "2021-02-05T13:58:48.856Z"
                              message: "Check balance: authorized"
                              attributes:
                                amount: 1
                                currency: API
                            - timestamp: "2021-02-05T13:58:48.864Z"
                              message: "Check create: accepted"
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/phone_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/7f1bc78ab197ee8b"
                          trace_id: 7f1bc78ab197ee8b
                          logs:
                            - timestamp: "2021-02-05T13:59:05.060Z"
                              message: "Check balance: confirmed"
                              attributes:
                                amount: 1
                                currency: API
                    _links:
                      self:
                        href: "https://eu.api.tru.id/phone_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/phone_check/v0.1/checks/{check_id}/traces/{trace_id}":
    parameters:
      - name: check_id
        description: The ID of the PhoneCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
      - name: trace_id
        description: The ID of the Trace
        schema:
          type: string
        in: path
        required: true
    get:
      summary: Get PhoneCheck Trace
      description: Get the Trace identified by `trace_id` of the PhoneCheck identified by `check_id`
      operationId: get-phone-check-trace
      tags:
        - phone_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceResource
              examples:
                basic:
                  value:
                    trace_id: 6f2a0e25fc0caa25
                    logs:
                      - timestamp: "2021-02-05T13:58:48.751Z"
                        message: "Check create: request accepted"
                      - timestamp: "2021-02-05T13:58:48.824Z"
                        message: "Check create: phone number is routable"
                      - timestamp: "2021-02-05T13:58:48.856Z"
                        message: "Check balance: authorized"
                        attributes:
                          amount: 1
                          currency_code: API
                      - timestamp: "2021-02-05T13:58:48.864Z"
                        message: "Check create: successful "
                    _links:
                      self:
                        href: "https://eu.api.tru.id/phone_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  /subscriber_check/v0.1/checks:
    post:
      summary: Create an SubscriberCheck workflow
      description: |
        Starts the SubscriberCheck workflow.
      operationId: create-subscriber-check
      security:
        - ProjectBearerAuth: []
      tags:
        - subscriber_check
      requestBody:
        description: JSON payload to create an SubscriberCheck
        content:
          application/json:
            schema:
              $ref: ./models/subscriber_check/SubscriberCheckResourceModels.v1.yaml#/components/schemas/SubscriberCheckCreatePayload
      callbacks:
        phoneCheckEndStatus:
          "{$request.body#/callback_url}":
            post:
              summary: SubscriberCheck has reached an end status
              parameters:
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-security
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-callback
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/digest
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/date
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/host
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      $ref: ./models/subscriber_check/SubscriberCheckResourceModels.v1.yaml#/components/schemas/SubscriberCheckCallbackPayload
              responses:
                $ref: ./models/common/Responses.v1.yaml#/components/responses/WebHookExpectedResponse
      responses:
        "201":
          description: SubscriberCheck created
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/subscriber_check/SubscriberCheckResourceModels.v1.yaml#/components/schemas/SubscriberCheckCreateResponse
        "400":
          description: Bad Request
          content:
            application/problem+json:
              schema:
                oneOf:
                  - $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/InvalidPhoneNumberFormat
                  - type: object
                    allOf:
                      - $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/ProblemDetailsBase
                      - type: object
                        description: The country for the supplied `phone_number` is not supported
    get:
      summary: Get a collection of SubscriberChecks
      operationId: get-subscriber-checks
      description: Get a full list of SubscriberChecks or filter by query parameter.
      security:
        - ProjectBearerAuth: []
      tags:
        - subscriber_check
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/search
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/sort
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/subscriber_check/SubscriberCheckResourceModels.v1.yaml#/components/schemas/SubscriberCheckCollection
  "/subscriber_check/v0.1/checks/{check_id}":
    parameters:
      - name: check_id
        description: The ID of the SubscriberCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get SubscriberCheck
      description: Get a SubscriberCheck identified by `check_id`.
      operationId: get-subscriber-check
      security:
        - ProjectBearerAuth: []
      tags:
        - subscriber_check
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/subscriber_check/SubscriberCheckResourceModels.v1.yaml#/components/schemas/SubscriberCheckGetResponse
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/subscriber_check/v0.1/checks/{check_id}/redirect":
    parameters:
      - name: check_id
        description: The ID of the SubscriberCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Perform the SubscriberCheck
      description: Perform the SubscriberCheck identified by `check_id`.
      operationId: get-subscriber-check-redirect
      tags:
        - subscriber_check
      responses:
        "302":
          description: Redirects to the `check_url`.
          headers:
            Location:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Location
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "400":
          description: Mobile Network Operator Not Supported
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/MobileNetworkOperatorNotSupported
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "412":
          description: Not a mobile IP
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotMobileIp
  "/subscriber_check/v0.1/checks/{check_id}/traces":
    parameters:
      - name: check_id
        description: The ID of the SubscriberCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get a collection of SubscriberCheck Traces
      description: Get Traces of the SubscriberCheck identified by `check_id`
      operationId: get-subscriber-check-traces
      tags:
        - subscriber_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceCollection
              examples:
                basic:
                  value:
                    _embedded:
                      traces:
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/subscriber_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
                          trace_id: 6f2a0e25fc0caa25
                          logs:
                            - timestamp: "2021-02-05T13:58:48.751Z"
                              message: "Check create: phone number is reachable"
                            - timestamp: "2021-02-05T13:58:48.856Z"
                              message: "Check balance: authorized"
                              attributes:
                                amount: 1
                                currency: API
                            - timestamp: "2021-02-05T13:58:48.864Z"
                              message: "Check create: accepted"
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/subscriber_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/7f1bc78ab197ee8b"
                          trace_id: 7f1bc78ab197ee8b
                          logs:
                            - timestamp: "2021-02-05T13:59:05.060Z"
                              message: "Check balance: confirmed"
                              attributes:
                                amount: 1
                                currency: API
                    _links:
                      self:
                        href: "https://eu.api.tru.id/subscriber_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/subscriber_check/v0.1/checks/{check_id}/traces/{trace_id}":
    parameters:
      - name: check_id
        description: The ID of the SubscriberCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
      - name: trace_id
        description: The ID of the of the Trace
        schema:
          type: string
        in: path
        required: true
    get:
      summary: Get SubscriberCheck Trace
      description: Get the Trace identified by `trace_id`  of the SubscriberCheck identified by `check_id`
      operationId: get-subscriber-check-trace
      tags:
        - subscriber_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceResource
              examples:
                basic:
                  value:
                    trace_id: 6f2a0e25fc0caa25
                    logs:
                      - timestamp: "2021-02-05T13:58:48.751Z"
                        message: "Check create: phone number is reachable"
                      - timestamp: "2021-02-05T13:58:48.856Z"
                        message: "Check balance: authorized"
                        attributes:
                          amount: 1
                          currency: API
                      - timestamp: "2021-02-05T13:58:48.864Z"
                        message: "Check create: accepted"
                        _links:
                          self:
                            href: "https://eu.api.tru.id/subscriber_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  /sim_check/v0.1/checks:
    post:
      summary: Create a SIMCheck
      description: |
        Starts the SIMCheck
      operationId: create-sim-check
      security:
        - ProjectBearerAuth: []
      tags:
        - sim_check
      requestBody:
        description: JSON payload to create a SIMCheck
        content:
          application/json:
            schema:
              $ref: ./models/sim_check/SimCheckResourceModels.v1.yaml#/components/schemas/SimCheckCreatePayload
      responses:
        "201":
          description: SIMCheck created
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/sim_check/SimCheckResourceModels.v1.yaml#/components/schemas/SimCheck
                  - type: object
                    properties:
                      status:
                        description: The current status of the SIMCheck
                        type: string
                        enum:
                          - COMPLETED
                          - ERROR
                        example: COMPLETED
                      snapshot_balance:
                        description: |
                          The workspace balance in `charge_currency` taking into account the `charge_amount`.
                          This property is not persisted and is only returned when the SIMCheck is initially created.
                        type: number
                        example: 100
        "400":
          description: Mobile Network Operator Not Supported
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/MobileNetworkOperatorNotSupported
        "412":
          description: Not a mobile IP
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotMobileIp
    get:
      summary: Get a collection of SIMChecks
      operationId: get-sim-checks
      description: Get a full list of SIMChecks or filter by query parameter.
      security:
        - ProjectBearerAuth: []
      tags:
        - sim_check
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/search
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/sort
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/sim_check/SimCheckResourceModels.v1.yaml#/components/schemas/SimCheckCollection
  "/sim_check/v0.1/checks/{check_id}":
    parameters:
      - name: check_id
        description: The ID of the SIMCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get SIMCheck
      description: Get a SIMCheck identified by `check_id`.
      operationId: get-sim-check
      security:
        - ProjectBearerAuth: []
      tags:
        - sim_check
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/sim_check/SimCheckResourceModels.v1.yaml#/components/schemas/SimCheck
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/sim_check/v0.1/checks/{check_id}/traces":
    parameters:
      - name: check_id
        description: The ID of the SIMCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    get:
      summary: Get a collection of SIMCheck Traces
      description: Get Traces of the SIMCheck identified by `check_id`
      operationId: get-sim-check-traces
      tags:
        - sim_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceCollection
              examples:
                basic:
                  value:
                    _embedded:
                      traces:
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/sim_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
                          trace_id: 6f2a0e25fc0caa25
                          logs:
                            - timestamp: "2021-02-05T13:58:48.751Z"
                              message: "Check create: phone number is reachable"
                            - timestamp: "2021-02-05T13:58:48.856Z"
                              message: "Check balance: authorized"
                              attributes:
                                amount: 1
                                currency: API
                            - timestamp: "2021-02-05T13:58:48.864Z"
                              message: "Check create: accepted"
                        - _links:
                            self:
                              href: "https://eu.api.tru.id/sim_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/7f1bc78ab197ee8b"
                          trace_id: 7f1bc78ab197ee8b
                          logs:
                            - timestamp: "2021-02-05T13:59:05.060Z"
                              message: "Check balance: confirmed"
                              attributes:
                                amount: 1
                                currency: API
                    _links:
                      self:
                        href: "https://eu.api.tru.id/sim_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/sim_check/v0.1/checks/{check_id}/traces/{trace_id}":
    parameters:
      - name: check_id
        description: The ID of the SIMCheck
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
      - name: trace_id
        description: The ID of the of the trace
        schema:
          type: string
        in: path
        required: true
    get:
      summary: Get Simcheck Trace
      description: Get the Trace identified by `trace_id`  of the SIMCheck identified by `check_id`
      operationId: get-sim-check-trace
      tags:
        - sim_check
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/trace/TraceResourceModels.v1.yaml#/components/schemas/TraceResource
              examples:
                basic:
                  value:
                    trace_id: 6f2a0e25fc0caa25
                    logs:
                      - timestamp: "2021-02-05T13:58:48.751Z"
                        message: "Check create: request accepted"
                      - timestamp: "2021-02-05T13:58:48.824Z"
                        message: "Check create: phone number is routable"
                      - timestamp: "2021-02-05T13:58:48.856Z"
                        message: "Check balance: authorized"
                        attributes:
                          amount: 1
                          currency_code: API
                      - timestamp: "2021-02-05T13:58:48.864Z"
                        message: "Check create: successful"
                    _links:
                      self:
                        href: "https://eu.api.tru.id/sim_check/v0.1/checks/857b1bab-c2e8-41ec-9f76-9695ec78b91b/traces/6f2a0e25fc0caa25"
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/coverage/v0.1/countries/{code}":
    parameters:
      - name: code
        schema:
          oneOf:
            - $ref: ./models/coverage/CoverageResourceModels.v1.yaml#/components/schemas/CountryCode
            - $ref: ./models/coverage/CoverageResourceModels.v1.yaml#/components/schemas/CountryDialingCode
        description: "Either two letter code [ISO 3166-1 alpha-2](https://www.iso.org/obp/ui/#iso:std:iso:3166:-3:ed-3:v1:en) or country dialing code"
        in: path
        required: true
        examples:
          country_code:
            value: GB
            summary: United Kingdom Country Code
          dialing_code:
            value: 44
            summary: The dialing code for United Kingdom
    get:
      summary: Get Country Coverage
      description: |
        Get the country product coverage by country code.

        Project-level authentication (`client_id` and `client_secret`) is required. Associated pricing for the countries in the API response are based on the Workspace that the Project is associated with.
      operationId: get-coverage-by-code
      security:
        - ProjectBearerAuth: []
      tags:
        - coverage
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/coverage/CoverageResourceModels.v1.yaml#/components/schemas/CountryCoverage
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: No Reach
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/coverage/v0.1/device_ips/{ip}":
    parameters:
      - name: ip
        schema:
          type: string
          format: ipv4 | ipv6
        description: The device ip in ipv4 or ipv6 format
        in: path
        required: true
    get:
      summary: Get Device Reachability
      description: Get the mobile network that a device is on along with products that are supported based on device IP address.
      operationId: get-coverage-by-device-ip
      security:
        - ProjectBearerAuth: []
      tags:
        - coverage
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/coverage/CoverageResourceModels.v1.yaml#/components/schemas/DeviceReachability
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "400":
          description: MNO Not Supported
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/MobileNetworkOperatorNotSupported
        "412":
          description: Not a mobile IP
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotMobileIp
  /public/coverage/v0.1/device_ip:
    get:
      summary: Get Device Reachability
      description: Get the mobile network that a device is on along with products that are supported based on the sender device IP address. No Authentication is required for this endpoint.
      operationId: get-public-coverage-by-device-ip
      security: []
      tags:
        - coverage
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/coverage/CoverageResourceModels.v1.yaml#/components/schemas/DeviceReachability
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "400":
          description: MNO Not Supported
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/MobileNetworkOperatorNotSupported
        "412":
          description: Not a mobile IP
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotMobileIp

  /console/v0.2/workspaces:
    get:
      summary: Get a collection of Workspaces
      description: "Get the list of workspaces"
      tags:
        - workspaces
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/schemas/WorkspaceCollection
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
      operationId: get-console-v0.2-workspaces
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a Workspace
      description: "Get a specific workspace"
      tags:
        - workspaces
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/schemas/WorkspaceFull
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}/billing_account":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a Billing Account
      description: "Get the billing account"
      tags:
        - payments
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/BillingAccount
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace-billing_account
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
    put:
      summary: Update a Billing Account
      description: "Update the billing account"
      tags:
        - payments
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/BillingAccount
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: put-console-v0.2-workspace-billing_account
      requestBody:
        description: JSON payload to update a billing account
        content:
          application/json:
            schema:
              $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/BillingAccountPartial
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}/payment_methods":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a collection of Payment Methods
      description: "Get all the payment methods"
      tags:
        - payments
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/PaymentMethodCollection
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace-payment_methods
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}/payment_methods/{payment_method_id}":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/parameters/paymentMethodId
    get:
      summary: Get a Payment Method
      description: "Get a payment method"
      tags:
        - payments
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/PaymentMethod
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace-payment_method
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
    delete:
      summary: Delete a Payment Method
      description: "Delete a payment method"
      tags:
        - payments
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
      operationId: delete-console-v0.2-workspace-payment_method
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}/topups":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a collection of Topups
      description: "Get the topups history"
      tags:
        - payments
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/TopupCollection
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace-topups
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
    post:
      summary: Create a Topup
      description: "Create a topup"
      tags:
        - payments
      requestBody:
        description: A JSON payload for the topup that is to be created.
        content:
          application/hal+json:
            schema:
              $ref: ./models/console/PaymentResourceModels.v1.yaml#/components/schemas/CreateTopup
      responses:
        "201":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: post-console-v0.2-workspace-topups
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  
  "/console/v0.2/workspaces/{workspace_id}/members":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a collection of Members
      description: "Get all members for the workspace identified by `workspace_id`"
      tags:
        - members
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/Member.v1.yaml#/components/schemas/MemberCollection
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
      operationId: get-console-v0.2-workspace-members
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  "/console/v0.2/workspaces/{workspace_id}/members/{member_id}":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/memberId
    get:
      summary: Get a Member
      description: "Get a Member identified by `member_id`"
      tags:
        - members
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/Member.v1.yaml#/components/schemas/MemberFull
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
      operationId: get-console-v0.2-workspace-member
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []

  "/console/v0.2/workspaces/{workspace_id}/members/{member_id}/credentials":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/memberId
    get:
      summary: Get a collection of Workspace  Credentials
      description: "Get the Workspace Credentials created by the member identified by `member_id`"
      tags:
        - members
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/WorkspaceCredentialCollection
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
      operationId: get-console-v0.2-workspace-member-credentials
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
    post:
      summary: Create a Workspace Credential
      description: "Create workspace credential associated with a specific member"
      tags:
        - members
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/WorkspaceCredential
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: post-console-v0.2-workspace-member-credential-create
      security:
        - UserBearerAuth: []
        - WorkspaceBearerAuth: []
  

  "/console/v0.2/workspaces/{workspace_id}/members/{member_id}/credentials/{client_id}":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/memberId
      - $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/parameters/clientId
    get:
      summary: Get a Workspace Credential
      description: "Get the Workspace Credential identified by `client_id`"
      tags:
        - members
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/WorkspaceCredential
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: get-console-v0.2-workspace-member-credential
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
    delete:
      summary: Delete a Workspace Credential
      description: "Delete the Workspace Credential identified by `client_id`"
      tags:
        - members
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      operationId: delete-console-v0.2-workspace-member-credential
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []

  "/console/v0.2/workspaces/{workspace_id}/projects":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    post:
      summary: Create a Project
      description: Create a Project
      operationId: post-console-v0.2-workspace-projects
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      requestBody:
        description: A JSON payload for the Project that is to be created.
        content:
          application/json:
            schema:
              $ref: ./models/console/ProjectResourceModels.v2.yaml#/components/schemas/CreateProjectPayload
            examples:
              basic:
                value:
                  name: My test project
      responses:
        "201":
          description: Created
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v2.yaml#/components/schemas/ProjectCreated
              examples:
                basic:
                  value:
                    project_id: c69bc0e6-a429-11ea-bb37-0242ac130003
                    name: My test project
                    created_at: "2020-06-01T16:43:30+00:00"
                    updated_at: "2020-06-01T16:43:30+00:00"
                    _links:
                      self:
                        href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/projects/c69bc0e6-a429-11ea-bb37-0242ac130003
                      my_credentials:
                        href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/projects/c69bc0e6-a429-11ea-bb37-0242ac130003/credentials?search==member_id             
                    _embedded:
                      credentials:
                        - client_id: 6779ef20e75817b79602
                          client_secret: 6779ef20e75
                          scopes:
                            - phone_check
                          created_at: "2020-06-01T16:43:30+00:00"
                          updated_at: "2020-06-01T16:43:30+00:00"
                          _links:
                            self:
                              href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/projects/c69bc0e6-a429-11ea-bb37-0242ac130003/credentials/6779ef20e75817b79602
                            member:
                              href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61

        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
      callbacks:
        projectLevelPhoneCheckEndStatus:
          "{$request.body#/configuration.phone_check.callback_url}":
            post:
              summary: PhoneCheck has reached an end status
              parameters:
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-security
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-callback
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/digest
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/date
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/host
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCallbackPayload
              responses:
                $ref: ./models/common/Responses.v1.yaml#/components/responses/WebHookExpectedResponse
    get:
      summary: Get a collection of Projects
      description: Get a full list of Projects or filter by query parameter.
      operationId: get-console-v0.2-workspace-projects
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      parameters:
        - name: name
          description: The name of the project
          schema:
            type: string
            example: hello
          in: query
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/search
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/sort
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v2.yaml#/components/schemas/ProjectCollection
              examples:
                basic:
                  value:
                    page:
                      size: 10
                      number: 1
                      total_pages: 1
                      total_elements: 2
                    _embedded:
                      projects:
                        - _links:
                            self:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130002
                            my_credentials:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130002/credentials
                          project_id: c69bc0e6-a429-11ea-bb37-0242ac130002
                          name: My first project
                          created_at: "2020-06-01T16:43:30+00:00"
                          updated_at: "2020-06-01T16:43:30+00:00"
                          member_id: c78ac34e-20b9-47dc-a070-c0abec1a3c61
                        - _links:
                            self:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130003
                            my_credentials:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130002/credentials
                          project_id: c69bc0e6-a429-11ea-bb37-0242ac130003
                          name: My second project
                          created_at: "2020-06-01T16:43:30+00:00"
                          updated_at: "2020-06-01T16:43:30+00:00"
                          member_id: c78ac34e-20b9-47dc-a070-c0abec1a3c61
                    _links:
                      first:
                        href: /projects/page=1&size=10
                      last:
                        href: /projects/page=3&size=10
                      next:
                        href: /projects/page=3&size=10
                      prev:
                        href: /projects/page=1&size=10
                      self:
                        href: /projects/page=2&size=10

  "/console/v0.2/workspaces/{workspace_id}/projects/{project_id}":
    parameters:
      - $ref: ./models/common/ProjectCommon.v1.yaml#/components/parameters/projectId
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Get a Project
      description: Get a Project identified by `project_id`.
      operationId: get-console-v0.2-workspace-project
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v2.yaml#/components/schemas/Project
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
    patch:
      summary: Update a Project
      description: Update the project identified by the `project_id`.
      operationId: patch-console-v0.2-workspace-project
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      requestBody:
        description: A JSON payload for the Project that is to be created.
        content:
          application/json-patch+json:
            schema:
              $ref: ./models/common/ProjectCommon.v1.yaml#/components/schemas/ProjectPatchPayload
            examples:
              change_mode:
                summary: Change the Project mode to `live`
                value:
                  - op: replace
                    path: /mode
                    value: live
              change_name:
                summary: Change the Project name
                value:
                  - op: replace
                    path: /name
                    value: my-new-name
              add_callback_url:
                summary: Add a `callback_url` to the Project configuration
                value:
                  - op: add
                    path: /configuration
                    value:
                      phone_check:
                        callback_url: "https://example.com/callback"
              replace_callback_url:
                summary: Replace a `callback_url` for a Project configuration
                value:
                  - op: replace
                    path: /configuration/phone_check/callback_url
                    value: "https://example.com/updated_callback"
              remove_callback_url:
                summary: Remove the `callback_url` from the Project configuration
                value:
                  - op: remove
                    path: /configuration/phone_check/callback_url
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v2.yaml#/components/schemas/Project
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
  
  "/console/v0.2/workspaces/{workspace_id}/projects/{project_id}/credentials/{client_id}":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/common/ProjectCommon.v1.yaml#/components/parameters/projectId
      - $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/parameters/clientId
    get:
      summary: Get Project Credential
      description: 'Get the Project Credential identified by `client_id`'
      operationId: get-console-v0.2-workspace-project-credential
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/ProjectCredential
              examples:
                basic:
                  value:
                    client_id: 8cbd640e-2cbf-42d1-bd57-421169144300
                    scopes:
                      - phone_check
                    created_at: "2020-06-01T16:43:30+00:00"
                    updated_at: "2020-06-01T16:43:30+00:00"
                    _embedded:
                      created_by:
                        member_id: c78ac34e-20b9-47dc-a070-c0abec1a3c61
                        name: John Brown
                        _links:
                          self:
                            href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61
                    _links:
                      self:
                        href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/projects/123cccb-20b9-47dc-a070-c0abec1a3c61/credentials/8cbd640e-2cbf-42d1-bd57-421169144300
                      member:
                        href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61
                      
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
    delete:
      summary: Delete Project Credential
      description: 'Delete the Project Credential identified by `client_id`'
      operationId: delete-console-v0.2-workspace-project-credential
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden

  "/console/v0.2/workspaces/{workspace_id}/projects/{project_id}/credentials":
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
      - $ref: ./models/common/ProjectCommon.v1.yaml#/components/parameters/projectId
    get:
      summary: Get a collection of Project Credentials
      description: 'Get the collection of Project Credentials for the project identified by `project_id`'
      operationId: get-console-v0.2-workspace-project-credentials
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/ProjectCredentialCollection
              examples:
                basic:
                  value:
                    page:
                      size: 10
                      number: 1
                      total_pages: 1
                      total_elements: 2
                    _embedded:
                      credentials:
                      - client_id: 8cbd640e-2cbf-42d1-bd57-421169144300
                        scopes:
                          - phone_check
                        created_at: "2020-06-01T16:43:30+00:00"
                        updated_at: "2020-06-01T16:43:30+00:00"
                        _embedded:
                          created_by:
                            member_id: c78ac34e-20b9-47dc-a070-c0abec1a3c61
                            name: John Brown
                            _links:
                              self:
                                href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61
                        _links:
                          self:
                            href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/projects/c69bc0e6-a429-11ea-bb37-0242ac130002/credentials/8cbd640e-2cbf-42d1-bd57-421169144300
                          member:
                            href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden
    post:
      summary: Create Project Credential
      description: 'Create Project Credential for the project identified by `project_id`'
      operationId: post-console-v0.2-workspace-project-credential
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - projects
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: ./models/console/CredentialResourceModels.v1.yaml#/components/schemas/ProjectCredential
              examples:
                basic:
                  value:
                    client_id: 8cbd640e-2cbf-42d1-bd57-421169144300
                    scopes:
                      - phone_check
                    created_at: "2020-06-01T16:43:30+00:00"
                    updated_at: "2020-06-01T16:43:30+00:00"
                    _embedded:
                      created_by:
                        member_id: c78ac34e-20b9-47dc-a070-c0abec1a3c61
                        name: John Brown
                        _links:
                          self:
                            href: /console/v0.2/workspaces/8d2ad339-8f11-4858-9623-a20c42b79acf/members/c78ac34e-20b9-47dc-a070-c0abec1a3c61
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
        "403":
          description: Forbidden
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/Forbidden

  /console/v0.2/workspaces/{workspace_id}/usage/hourly:
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Hourly API usage
      description: Get the workspace's usage with hourly breakdown
      operationId: get-console-v0.2-usage-hourly
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - usage
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchHourly
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceHourly

  /console/v0.2/workspaces/{workspace_id}/usage/daily:
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Daily API usage
      description: Get the workspace's usage with daily breakdown
      operationId: get-console-v0.2-usage-daily
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - usage
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchDaily
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage Resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceDaily
                          
  /console/v0.2/workspaces/{workspace_id}/usage/monthly:
    parameters:
      - $ref: ./models/console/WorkspaceResourceModels.v2.yaml#/components/parameters/workspaceId
    get:
      summary: Monthly API usage
      description: Get the workspace's usage with monthly breakdown
      operationId: get-console-v0.2-usage-monthly
      security:
        - WorkspaceBearerAuth: []
        - UserBearerAuth: []
      tags:
        - usage
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchMonthly
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage Resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceMonthly

  # DEPRECATED STUFF
  /console/v0.1/projects:
    post:
      summary: Create a Project
      description: '🚨 [DEPRECATED] use <a href="#operation/post-console-v0.2-workspace-projects">v0.2 endpoint</a>'
      operationId: create-project
      security:
        - WorkspaceBearerAuth: []
      tags:
        - projects_deprecated
      requestBody:
        description: A JSON payload for the Project that is to be created.
        content:
          application/json:
            schema:
              $ref: ./models/console/ProjectResourceModels.v1.yaml#/components/schemas/CreateProjectPayload
            examples:
              basic:
                value:
                  name: My test project
      responses:
        "201":
          description: Created
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v1.yaml#/components/schemas/ProjectFull
              examples:
                basic:
                  value:
                    project_id: c69bc0e6-a429-11ea-bb37-0242ac130003
                    name: My test project
                    created_at: "2020-06-01T16:43:30+00:00"
                    updated_at: "2020-06-01T16:43:30+00:00"
                    _links:
                      self:
                        href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130003
                    credentials:
                      - client_id: 6779ef20e75817b79602
                        client_secret: 6779ef20e758
                        scopes:
                          - phone_check
                        created_at: "2020-06-01T16:43:30+00:00"
      callbacks:
        projectLevelPhoneCheckEndStatus:
          "{$request.body#/configuration.phone_check.callback_url}":
            post:
              summary: PhoneCheck has reached an end status
              parameters:
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-security
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/x-tru-callback
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/digest
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/date
                - $ref: ./models/common/Headers.v1.yaml#/components/headers/host
              requestBody:
                required: true
                content:
                  application/json:
                    schema:
                      $ref: ./models/phone_check/PhoneCheckResourceModels.v1.yaml#/components/schemas/PhoneCheckCallbackPayload
              responses:
                $ref: ./models/common/Responses.v1.yaml#/components/responses/WebHookExpectedResponse
    get:
      summary: Get a collection of Projects
      operationId: get-projects
      description: '🚨 [DEPRECATED] use <a href="#operation/get-console-v0.2-workspace-projects">v0.2 endpoint</a>'
      security:
        - WorkspaceBearerAuth: []
      tags:
        - projects_deprecated
      parameters:
        - name: name
          description: The name of the project
          schema:
            type: string
            example: hello
          in: query
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/search
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/sort
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v1.yaml#/components/schemas/ProjectCollection
              examples:
                basic:
                  value:
                    page:
                      size: 10
                      number: 1
                      total_pages: 1
                      total_elements: 2
                    _embedded:
                      projects:
                        - _links:
                            self:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130002
                          project_id: c69bc0e6-a429-11ea-bb37-0242ac130002
                          name: My first project
                          created_at: "2020-06-01T16:43:30+00:00"
                          updated_at: "2020-06-01T16:43:30+00:00"
                          credentials:
                            - client_id: 63f16604-2b4f-4e45-b32f-59290507fe93
                              scopes:
                                - phone_check
                              created_at: "2020-06-01T16:43:30+00:00"
                        - _links:
                            self:
                              href: /projects/c69bc0e6-a429-11ea-bb37-0242ac130003
                          project_id: c69bc0e6-a429-11ea-bb37-0242ac130003
                          name: My second project
                          created_at: "2020-06-01T16:43:30+00:00"
                          updated_at: "2020-06-01T16:43:30+00:00"
                          credentials:
                            - client_id: 63f16604-2b4f-4e45-b32f-59290507fe92
                              scopes:
                                - phone_check
                              created_at: "2020-06-01T16:43:30+00:00"
                    _links:
                      first:
                        href: /projects/page=1&size=10
                      last:
                        href: /projects/page=3&size=10
                      next:
                        href: /projects/page=3&size=10
                      prev:
                        href: /projects/page=1&size=10
                      self:
                        href: /projects/page=2&size=10
  "/console/v0.1/projects/{project_id}":
    parameters:
      - $ref: ./models/common/ProjectCommon.v1.yaml#/components/parameters/projectId
    get:
      summary: Get Project
      description: '🚨 [DEPRECATED] use <a href="#operation/get-console-v0.2-workspace-project">v0.2 endpoint</a>'
      operationId: get-project
      security:
        - WorkspaceBearerAuth: []
      tags:
        - projects_deprecated
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v1.yaml#/components/schemas/ProjectPartial
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
    patch:
      summary: Update a Project
      description: '🚨 [DEPRECATED] use <a href="#operation/patch-console-v0.2-workspace-project">v0.2 endpoint</a>'
      operationId: patch-project
      security:
        - WorkspaceBearerAuth: []
      tags:
        - projects_deprecated
      requestBody:
        description: A JSON payload for the Project that is to be created.
        content:
          application/json-patch+json:
            schema:
              $ref: ./models/common/ProjectCommon.v1.yaml#/components/schemas/ProjectPatchPayload
            examples:
              change_mode:
                summary: Change the Project mode to `live`
                value:
                  - op: replace
                    path: /mode
                    value: live
              change_name:
                summary: Change the Project name
                value:
                  - op: replace
                    path: /name
                    value: my-new-name
              add_callback_url:
                summary: Add a `callback_url` to the Project configuration
                value:
                  - op: add
                    path: /configuration
                    value:
                      phone_check:
                        callback_url: "https://example.com/callback"
              replace_callback_url:
                summary: Replace a `callback_url` for a Project configuration
                value:
                  - op: replace
                    path: /configuration/phone_check/callback_url
                    value: "https://example.com/updated_callback"
              remove_callback_url:
                summary: Remove the `callback_url` from the Project configuration
                value:
                  - op: remove
                    path: /configuration/phone_check/callback_url
      responses:
        "200":
          description: OK
          content:
            application/hal+json:
              schema:
                $ref: ./models/console/ProjectResourceModels.v1.yaml#/components/schemas/ProjectPartial
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  "/console/v0.1/projects/{project_id}/credentials/{client_id}/reset":
    parameters:
      - $ref: ./models/common/ProjectCommon.v1.yaml#/components/parameters/projectId
      - name: client_id
        description: The client ID of the Project credentials
        schema:
          $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/UUID
        in: path
        required: true
    post:
      summary: Reset Project Credential
      description: '🚨 [DEPRECATED] use <a href="#operation/post-console-v0.2-workspace-projects">v0.2 endpoint</a>'
      operationId: reset-project-credential
      security:
        - WorkspaceBearerAuth: []
      tags:
        - projects_deprecated
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: ./models/common/CredentialTypes.v1.yaml#/components/schemas/ClientFullScopes
              examples:
                basic:
                  value:
                    client_id: 8cbd640e-2cbf-42d1-bd57-421169144300
                    client_secret: 8cbd640e-2cbf-42d1
                    scopes:
                      - phone_check
                    created_at: "2020-06-01T16:43:30+00:00"
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
        "404":
          description: Not Found
          content:
            application/problem+json:
              schema:
                $ref: ./models/common/HTTPProblemDetailTypes.v1.yaml#/components/responses/NotFound
  /console/v0.1/workspaces/default:
    get:
      summary: Get the default workspace resource for the current user
      description: "🚨 [DEPRECATED]"
      operationId: get-workspaces-default
      security:
        - WorkspaceBearerAuth: []
      tags:
        - workspaces_deprecated
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                type: object
                properties:
                  data_residency:
                    $ref: "./models/common/DataTypes.v1.yaml#/components/schemas/UUID"
                  created_at:
                    $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/ISODateTime
                  _embedded:
                    description: Resources related to the Workspace
                    type: object
                    properties:
                      balance:
                        description: The balance associated with the workspace
                        type: object
                        properties:
                          currency:
                            description: The currency for the workspace
                            allOf:
                              - $ref: ./models/common/DataTypes.v1.yaml#/components/schemas/Currency
                          amount_available:
                            description: The amount in `currency` that is available for the workspace.
                            type: integer
                          amount_reserved:
                            description: The amount in `currency` that has been reserved due to pending operations
                            type: integer
                  credentials:
                    $ref: ./models/common/CredentialTypes.v1.yaml#/components/schemas/ClientPartial
  /console/v0.1/workspaces/default/usage/hourly:
    get:
      summary: Hourly API usage
      description: '🚨 [DEPRECATED] use <a href="#operation/get-console-v0.2-usage-hourly">v0.2 endpoint</a>'
      operationId: get-usage-hourly
      security:
        - WorkspaceBearerAuth: []
      tags:
        - usage_deprecated
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchHourly
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceHourly
  /console/v0.1/workspaces/default/usage/daily:
    get:
      summary: Daily API usage
      description: '🚨 [DEPRECATED] use <a href="#operation/get-console-v0.2-usage-daily">v0.2 endpoint</a>'
      operationId: get-usage-daily
      security:
        - WorkspaceBearerAuth: []
      tags:
        - usage_deprecated
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchDaily
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage Resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceDaily
  /console/v0.1/workspaces/default/usage/monthly:
    get:
      summary: Monthly API usage
      description: '🚨 [DEPRECATED] use <a href="#operation/get-console-v0.2-usage-monthly">v0.2 endpoint</a>'
      operationId: get-usage-monthly
      security:
        - WorkspaceBearerAuth: []
      tags:
        - usage_deprecated
      parameters:
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageSize
        - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/parameters/pageNumber
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/searchMonthly
        - $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/parameters/groupBy
      responses:
        "200":
          description: OK
          headers:
            X-RateLimit-Limit:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Limit
            X-RateLimit-Remaining:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/X-RateLimit-Remaining
            Access-Control-Allow-Origin:
              $ref: ./models/common/Headers.v1.yaml#/components/headers/Access-Control-Allow-Origin-All
          content:
            application/hal+json:
              schema:
                allOf:
                  - $ref: ./models/common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
                  - type: object
                    properties:
                      _links:
                        $ref: ./models/common/PaginationLinks.v1.yaml
                      _embedded:
                        description: Resources related to the resource request
                        type: object
                        properties:
                          usage:
                            description: The Usage Resources within the collection
                            type: array
                            items:
                              $ref: ./models/usage/UsageResourceModels.v1.yaml#/components/schemas/UsageResourceMonthly

components:
  securitySchemes:
    BasicAuth:
      type: http
      scheme: basic
    WorkspaceBearerAuth:
      description: |
        The tru.ID APIs expect the bearer token to be a [OAuth2 Access Token](https://tools.ietf.org/html/rfc6749#section-1.4). The access token should be within the `Authorization` HTTP header.
        e.g. `Authorization: Bearer {access_token}`

        The token should be a Workspace-level access token. These are created using your Workspace `client_id` and `client_secret`.
      type: http
      scheme: bearer
    ProjectBearerAuth:
      description: |
        The tru.ID APIs expect the bearer token to be a [OAuth2 Access Token](https://tools.ietf.org/html/rfc6749#section-1.4). The access token should be within the `Authorization` HTTP header.
        e.g. `Authorization: Bearer {access_token}`. See [Create an Access Token](#operation/oauth2-token).

        The token should be associated with **tru.ID** Project. These are created using a Project `client_id` and `client_secret`. See [Create an Access Token](#operation/oauth2-token).
      type: http
      scheme: bearer
    UserBearerAuth:
      type: http
      scheme: bearer
  schemas:
    OAuth2Scope:
      description: |
        The scope of the access request. A spaced delimited list of scopes representing the resources the Access Token provides access to.

        - `console`: `/console/{version}` resources. From version 0.2.
        - `projects`: `/console/v0.1/projects` resources
        - `workspaces`: `/console/v0.1/workspaces` resources
        - `phone_check`: `/phone_check` resources
        - `subscriber_check`: `/subscriber_check` resources
        - `sim_check`: `/sim_check` resources
        - `coverage`: `/coverage` resources
        - `usage`: `/console/v0.1/workspaces/default/usage` resources
      type: string
      example: phone_check subscriber_check sim_check
  parameters:
    scope:
      name: scope
      description: |
        A spaced delimited list of scopes representing the resources the Access Token provides access to.
      in: query
      schema:
        $ref: "#/components/schemas/OAuth2Scope"
