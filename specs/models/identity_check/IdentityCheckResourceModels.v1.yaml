title: IdentityCheckResourceModels
type: object
description: Definitions of models related to Identity Check resources
components:
  schemas:  

    IdentityCheckStatus:
      description: |
        The status of a Identity Check:
      allOf:
        - $ref: '../check/CheckResourceModels.v1.yaml#/components/schemas/CheckStatus'

    IdentityCheckCreatePayload:
      description: Payload for creating a Identity Check
      allOf:
        - $ref: '../check/CheckResourceModels.v1.yaml#/components/schemas/CheckCreatePayload'

    IdentityCheckPartial:
      description: A Identity Check resource
      allOf:
        - $ref: '../check/CheckResourceModels.v1.yaml#/components/schemas/CheckPartial'
        - type: object
          properties:
            no_sim_change:
              description: |
                Returns true if the SIM card hasn't been changed in the last 7 days.
              type: boolean
            last_sim_change_at:
              description: When the last time the SIM card hasn't been changed.
              allOf:
                - $ref: ../common/DataTypes.v1.yaml#/components/schemas/ISODateTime
        
    IdentityCheck:
      description: The payload sent to a callback URL upon a Identity Check reaching an end state.
      allOf:
        - $ref: '#/components/schemas/IdentityCheckPartial'
        - type: object
          properties:
            _links:
              description: Links related to the current resource
              type: object
              properties:
                self:
                  description: The link to the current resource
                  allOf:
                    - $ref: ../common/Link.v1.yaml
                check_url:
                  description: A URL that the mobile client must navigate as part of the Identity Check verification flow.
                  allOf:
                    - $ref: ../common/Link.v1.yaml
              required:
                - self
                - check_url
      required:
        - _links

      example:
        check_id: c69bc0e6-a429-11ea-bb37-0242ac130002
        status: COMPLETED
        match: true
        no_sim_change: true
        charge_amount: 1
        charge_currency: API
        created_at: '2020-06-01T16:43:30+00:00'
        _links:
          self:
            href: https://us.api.4auth.io/identity_checks/v0.1/checks/{check_id}
          check_url:
            href: https://us.api.4auth.io/identity_checks/v0.1/checks/{check_id}/redirect

    IdentityCheckCollection:
      description: A Identity Check resource
      allOf:
        - $ref: ../common/PageBasedPagination.v1.yaml#/components/schemas/PageBasedPaginationBody
        - type: object
          properties:
            _links:
              description: Links related to the current resource
              $ref: ../common/PaginationLinks.v1.yaml
            _embedded:
              description: Resources related to the resource request
              type: object
              properties:
                checks:
                  description: The Identity Checks within the collection
                  type: array
                  items:
                    $ref: '#/components/schemas/IdentityCheck'

    IdentityCheckCallbackPayload:
      description: The payload sent to a callback URL upon a Identity Check reaching an end state.
      allOf:
        - $ref: '#/components/schemas/IdentityCheckPartial'